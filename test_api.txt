[1mğŸš€ INICIANDO TESTE COMPLETO DA API FLASK...[0m
[33mğŸ“ Este script testa todas as funcionalidades da API[0m
[33mğŸ”§ Certifique-se de que o servidor Flask estÃ¡ rodando[0m

[1mğŸš€ TESTE COMPLETO DA API FLASK[0m

[1mğŸ” DIAGNÃ“STICO INICIAL[0m
[32mâœ… Servidor Flask estÃ¡ rodando na porta 5000[0m

[1mğŸ“‹ SEÃ‡ÃƒO 1: AUTENTICAÃ‡ÃƒO E JWT[0m

[36m=== Login RH ===[0m
âœ… Status: [32m200[0m
[33mResponse: { access_token: '***', usuario: {...} }[0m

[36m=== Login Gestor ===[0m
âœ… Status: [32m200[0m
[33mResponse: { access_token: '***', usuario: {...} }[0m

[36m=== Login UsuÃ¡rio Comum ===[0m
âœ… Status: [32m200[0m
[33mResponse: { access_token: '***', usuario: {...} }[0m

[36m=== Login InvÃ¡lido (deve falhar) ===[0m
âœ… Status: [32m401[0m
[33mResponse: {
  "autenticado": false,
  "erro": "Credenciais invÃ¡lidas"
}[0m

[36m=== Endpoint /me ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "usuario": {
    "ativo": true,
    "criado_em": "2025-05-28T05:38:36.073185",
    "email": "maria.rh@techsolutions.com",
    "ferias_tiradas": 0,
    "grupo_id": 1,
    "grupo_nome": "Recursos Hu...[0m

[36m=== Refresh Token ===[0m
âœ… Status: [32m200[0m
[33mResponse: { access_token: '***', usuario: {...} }[0m

[1mğŸ“‹ SEÃ‡ÃƒO 2: GESTÃƒO DE EMPRESAS[0m

[36m=== Listar Empresas (RH) ===[0m
âœ… Status: [32m200[0m
[33mResponse: Array com 1 itens[0m

[36m=== Obter Empresa 1 ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "ativa": true,
  "cnpj": "12.345.678/0001-90",
  "criado_em": "2025-05-28T05:38:35.899753",
  "email": "empresa@techsolutions.com",
  "endereco": "Rua das Flores, 123 - SÃ£o Paulo/SP",
  "id": 1,
 ...[0m

[36m=== Criar Empresa ===[0m
âœ… Status: [32m201[0m
[33mResponse: {
  "ativa": true,
  "cnpj": "36309586/0001-96",
  "criado_em": "2025-06-04T17:44:43.276316",
  "email": "teste1749059083270@empresa.com",
  "endereco": "Rua Teste, 123",
  "id": 2,
  "nome": "Empresa...[0m

[36m=== Gestor tentando listar empresas (deve falhar) ===[0m
âœ… Status: [32m403[0m
[33mResponse: {
  "erro": "Sem permissÃ£o para listar empresas"
}[0m

[1mğŸ“‹ SEÃ‡ÃƒO 3: GESTÃƒO DE GRUPOS[0m

[36m=== Listar Grupos (RH) ===[0m
âœ… Status: [32m200[0m
[33mResponse: Array com 3 itens[0m

[36m=== Obter Grupo 1 ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "ativo": true,
  "criado_em": "2025-05-28T05:38:35.916568",
  "descricao": "Equipe de recursos humanos",
  "empresa_id": 1,
  "empresa_nome": "Tech Solutions LTDA",
  "id": 1,
  "nome": "Recursos ...[0m

[36m=== EstatÃ­sticas Grupo 1 ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "eventos_aprovados": 0,
  "eventos_pendentes": 1,
  "grupo": "Recursos Humanos",
  "total_usuarios": 2,
  "usuarios_ativos": 2
}[0m

[36m=== Criar Grupo ===[0m
âœ… Status: [32m201[0m
[33mResponse: {
  "ativo": true,
  "criado_em": "2025-06-04T17:44:43.349407",
  "descricao": "Grupo criado durante teste",
  "empresa_id": 1,
  "empresa_nome": "Tech Solutions LTDA",
  "id": 4,
  "nome": "Grupo Tes...[0m

[1mğŸ“‹ SEÃ‡ÃƒO 4: GESTÃƒO DE USUÃRIOS[0m

[36m=== Listar UsuÃ¡rios (RH) ===[0m
âœ… Status: [32m200[0m
[33mResponse: Array com 6 itens[0m

[36m=== UsuÃ¡rios do Grupo 2 ===[0m
âœ… Status: [32m200[0m
[33mResponse: Array com 3 itens[0m

[36m=== Obter UsuÃ¡rio 1 ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "ativo": true,
  "criado_em": "2025-05-28T05:38:36.073185",
  "email": "maria.rh@techsolutions.com",
  "ferias_tiradas": 0,
  "grupo_id": 1,
  "grupo_nome": "Recursos Humanos",
  "id": 1,
  "inici...[0m

[36m=== Criar UsuÃ¡rio ===[0m
âœ… Status: [32m201[0m
[33mResponse: {
  "ativo": true,
  "criado_em": "2025-06-04T17:44:43.539889",
  "email": "teste1749059083414@techsolutions.com",
  "ferias_tiradas": 0,
  "grupo_id": 2,
  "grupo_nome": "Desenvolvimento",
  "id": 7,...[0m

[36m=== Gestor listando usuÃ¡rios ===[0m
âœ… Status: [32m200[0m
[33mResponse: Array com 4 itens[0m

[1mğŸ“‹ SEÃ‡ÃƒO 5: GESTÃƒO DE EVENTOS[0m

[36m=== Listar Eventos (UsuÃ¡rio) ===[0m
âœ… Status: [32m200[0m
[33mResponse: Array com 5 itens[0m

[36m=== Criar Evento ===[0m
âœ… Status: [32m201[0m
[33mResponse: {
  "aprovado_por_id": null,
  "aprovado_por_nome": null,
  "criado_em": "2025-06-04T17:44:43.594527",
  "data_aprovacao": null,
  "data_fim": "2024-12-19",
  "data_inicio": "2024-12-15",
  "descricao...[0m

[36m=== Obter Evento Criado ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "aprovado_por_id": null,
  "aprovado_por_nome": null,
  "criado_em": "2025-06-04T17:44:43.594527",
  "data_aprovacao": null,
  "data_fim": "2024-12-19",
  "data_inicio": "2024-12-15",
  "descricao...[0m

[36m=== Aprovar Evento (Gestor) ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "status": "Evento aprovado"
}[0m

[1mğŸ“‹ SEÃ‡ÃƒO 6: CALENDÃRIO[0m

[36m=== CalendÃ¡rio Geral ===[0m
âœ… Status: [32m200[0m
[33mResponse: Array com 1 itens[0m

[36m=== CalendÃ¡rio Grupo 2 ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "eventos": [
    {
      "color": "red",
      "end": "2024-02-20",
      "extendedProps": {
        "description": "FÃ©rias de carnaval",
        "shift": null,
        "status": "aprovado",
     ...[0m

[1mğŸ“‹ SEÃ‡ÃƒO 7: VALIDAÃ‡Ã•ES DE SEGURANÃ‡A[0m

[36m=== Acesso sem token (deve falhar) ===[0m
âœ… Status: [32m401[0m
[33mResponse: {
  "erro": "Token de autenticaÃ§Ã£o necessÃ¡rio"
}[0m

[36m=== Token invÃ¡lido (deve falhar) ===[0m
âœ… Status: [32m401[0m
[33mResponse: {
  "erro": "Token invÃ¡lido"
}[0m

[36m=== UsuÃ¡rio comum criando usuÃ¡rio (deve falhar) ===[0m
âœ… Status: [32m403[0m
[33mResponse: {
  "erro": "Sem permissÃ£o para criar usuÃ¡rios"
}[0m

[36m=== Criar usuÃ¡rio com dados invÃ¡lidos (deve falhar) ===[0m
âœ… Status: [32m400[0m
[33mResponse: {
  "erro": "ParÃ¢metro ausente: 'email'"
}[0m

[36m=== Logout ===[0m
âœ… Status: [32m200[0m
[33mResponse: {
  "message": "Logout realizado com sucesso"
}[0m

[1mğŸ“Š RELATÃ“RIO FINAL[0m
============================================================
[1mTotal de Testes:[0m 30
[32mTestes Passaram:[0m 30
[31mTestes Falharam:[0m 0
[1mTaxa de Sucesso:[0m [32m100.0%[0m

[1mğŸ” ANÃLISE POR SEÃ‡ÃƒO:[0m
[36m1. AutenticaÃ§Ã£o:[0m Sistema JWT funcionando
[36m2. Empresas:[0m CRUD com permissÃµes RH
[36m3. Grupos:[0m GestÃ£o hierÃ¡rquica
[36m4. UsuÃ¡rios:[0m Controle de acesso por nÃ­vel
[36m5. Eventos:[0m Sistema de aprovaÃ§Ã£o
[36m6. CalendÃ¡rio:[0m VisualizaÃ§Ã£o de eventos
[36m7. SeguranÃ§a:[0m ValidaÃ§Ãµes e permissÃµes

[32mğŸ‰ API FUNCIONANDO PERFEITAMENTE![0m
[32mâœ… Todos os sistemas principais estÃ£o operacionais[0m

[1mğŸ’¡ PRÃ“XIMOS PASSOS:[0m
[32m- API pronta para uso em produÃ§Ã£o[0m
[32m- Considerar implementar testes automatizados[0m
[32m- Documentar endpoints para equipe[0m
